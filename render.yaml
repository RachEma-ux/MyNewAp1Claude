# Render.com Configuration for MyNewAp1Claude
# This file configures automatic deployment on Render

services:
  - type: web
    name: mynewap1claude
    env: node
    region: oregon # Change to your preferred region
    plan: starter # Change to your plan: free, starter, standard, pro
    branch: main # Deploy from main branch
    buildCommand: pnpm install --frozen-lockfile && pnpm run build && pnpm run db:push
    startCommand: pnpm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        sync: false # Set manually in Render Dashboard (contains sensitive credentials)
      - key: ANTHROPIC_API_KEY
        sync: false # Optional: Set manually if using Claude models
      - key: OPENAI_API_KEY
        sync: false # Optional: Set manually if using GPT models
      - key: GOOGLE_API_KEY
        sync: false # Optional: Set manually if using Gemini models

    healthCheckPath: /

    autoDeploy: true # Automatically deploy on git push

    # Auto-scaling (available on paid plans)
    # scaling:
    #   minInstances: 1
    #   maxInstances: 3
    #   targetCPUPercent: 70

# Optional: Database configuration (if using Render's managed MySQL)
# databases:
#   - name: mynewap1claude-db
#     databaseName: mynewap1claude_prod
#     user: admin
#     plan: starter # Change to your plan
#     region: oregon

# Notes:
# 1. Push this file to your repository
# 2. Render will auto-detect it and configure your service
# 3. Set DATABASE_URL in Render Dashboard (never commit credentials!)
# 4. Migration 0017 will run during build via db:push command
