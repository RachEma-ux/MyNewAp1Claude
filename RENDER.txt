================================================================================
RENDER DEPLOYMENT GUIDE
================================================================================

App URL: https://app-lktb.onrender.com
Dashboard: https://dashboard.render.com

================================================================================
IMPORTANT: DEV MODE IS ENABLED
================================================================================

Current Status: DEV_MODE=true (bypasses OAuth for testing)

This means:
- App auto-logs you in as "Dev User" (admin)
- No OAuth setup needed
- Perfect for testing and development

To Disable Dev Mode Later:
1. Go to Render dashboard → Environment tab
2. Delete the "DEV_MODE" variable (or set to "false")
3. Set up real OAuth credentials:
   - VITE_OAUTH_PORTAL_URL (your OAuth server)
   - VITE_APP_ID (your app ID)
   - OAUTH_SERVER_URL (backend OAuth server)

================================================================================
ENVIRONMENT VARIABLES
================================================================================

Current Variables in render.yaml:
- NODE_ENV=production
- JWT_SECRET (auto-generated by Render)
- DATABASE_URL (auto-connected to PostgreSQL)
- VITE_OAUTH_PORTAL_URL=https://example.com (placeholder)
- VITE_APP_ID=demo-app (placeholder)
- DEV_MODE=true (testing bypass)

How to Add/Edit Variables:
1. Go to Render dashboard
2. Select your "app" service
3. Click "Environment" in left sidebar
4. Add/edit variables
5. Service auto-redeploys on save

================================================================================
DEPLOYMENT
================================================================================

Auto-Deploy:
- Pushes to branch "claude/rename-app-YVcio" trigger auto-deploy
- Render detects changes via GitHub webhook
- Build takes ~3-5 minutes

Manual Deploy:
1. Go to Render dashboard
2. Click "Manual Deploy" → "Deploy latest commit"

Build Commands (from render.yaml):
- Build: pnpm install && pnpm build
- Start: pnpm start

================================================================================
DATABASE
================================================================================

Type: PostgreSQL (free tier)
Name: app-db
Connection: Auto-injected via DATABASE_URL

Database Access:
1. Go to Render dashboard
2. Click "app-db" in services list
3. Click "Connect" to get connection string
4. Use any PostgreSQL client to connect

Free Tier Limits:
- 90 days free (then database expires)
- 1GB storage
- Can create a new free DB after expiry

Schema Updates:
- Run migrations during build with: pnpm db:push
- Or add to package.json build script

================================================================================
CONFIGURATION FILES
================================================================================

render.yaml:
- Auto-configures everything (web service + database)
- Render reads this on first deploy
- Changes require redeploying or manual updates in dashboard

Important: Don't Delete render.yaml!
- It's the source of truth for your deployment
- If deleted, manual reconfiguration needed

================================================================================
FREE TIER LIMITS & GOTCHAS
================================================================================

Web Service:
✓ 750 hours/month (enough for hobby projects)
✓ 100GB bandwidth/month
⚠ Auto-sleeps after 15 min inactivity
⚠ First request after sleep takes ~30 seconds to wake up
⚠ 512MB RAM limit

Database:
✓ Free for 90 days
✓ 1GB storage
⚠ Expires after 90 days (create new one)

Performance:
- Shared CPU (slower than paid tiers)
- Good for testing/demos
- For production, upgrade to paid plan

================================================================================
COMMON ISSUES & FIXES
================================================================================

Issue: "Application Error" on first load
Fix: Database might still be creating, wait 1-2 minutes

Issue: App is slow to respond
Fix: Free tier sleeps after 15 min, first request wakes it (30 sec delay)

Issue: Build fails
Fix: Check build logs in Render dashboard, usually fixed by retry

Issue: "Invalid URL" error
Fix: Missing VITE environment variables (VITE_OAUTH_PORTAL_URL, VITE_APP_ID)

Issue: Changes not deploying
Fix:
  1. Check if auto-deploy is enabled (Settings → Build & Deploy)
  2. Manually trigger deploy
  3. Verify branch is correct (claude/rename-app-YVcio)

Issue: Database connection errors
Fix:
  1. Check DATABASE_URL is set in Environment
  2. Verify database service is running
  3. Check database hasn't expired (90 day limit)

================================================================================
UPDATING THE APP
================================================================================

Simple Updates (code changes):
1. Make changes locally
2. Commit: git commit -m "your message"
3. Push: git push -u origin claude/rename-app-YVcio
4. Render auto-deploys (watch progress in dashboard)

Adding Dependencies:
1. Update package.json
2. Commit and push
3. Render runs pnpm install automatically

Database Schema Changes:
1. Update drizzle/schema.ts
2. Commit and push
3. Run migrations (add to build script or run manually)

Environment Variable Changes:
1. Go to Render dashboard → Environment
2. Add/edit variables
3. Save (triggers auto-redeploy)

================================================================================
RENDER vs RAILWAY vs VERCEL
================================================================================

Why Render Works for This App:
✓ Supports full Express.js servers (Railway also does)
✓ No Docker cache nightmares (Railway had issues)
✓ Easy from mobile
✓ Free PostgreSQL included
✓ Auto-deploy from GitHub
✓ Simple configuration

Vercel: ❌ Doesn't support long-running Express servers (serverless only)
Railway: ❌ Had Docker cache issues, patch file problems
Render: ✅ Works perfectly!

================================================================================
MONITORING & LOGS
================================================================================

View Logs:
1. Go to Render dashboard
2. Click "Logs" tab
3. See real-time application logs

Check Service Health:
- Dashboard shows "Live" (green) when healthy
- Shows "Deploy in progress" during builds
- Shows "Failed" if deployment fails

Metrics (Paid Plans Only):
- CPU usage
- Memory usage
- Request volume
- Response times

================================================================================
GOING TO PRODUCTION
================================================================================

When Ready for Real Users:
1. Disable DEV_MODE (remove from environment)
2. Set up real OAuth server
3. Update VITE_OAUTH_PORTAL_URL to your OAuth portal
4. Update VITE_APP_ID to your registered app ID
5. Add OAUTH_SERVER_URL for backend
6. Consider upgrading to paid plan for:
   - No auto-sleep
   - More RAM/CPU
   - Better performance
   - Longer database retention

Security:
- JWT_SECRET is auto-generated (secure)
- Use HTTPS only (Render provides free SSL)
- Keep environment variables secret
- Don't commit .env files

================================================================================
USEFUL COMMANDS
================================================================================

Local Development:
pnpm install          # Install dependencies
pnpm dev             # Run dev server
pnpm build           # Build for production
pnpm start           # Run production server
pnpm db:push         # Push database schema

Git:
git status           # Check changes
git add .            # Stage all changes
git commit -m "msg"  # Commit changes
git push -u origin claude/rename-app-YVcio  # Push to trigger deploy

================================================================================
SUPPORT & RESOURCES
================================================================================

Render Docs: https://render.com/docs
Render Status: https://status.render.com
Community: https://community.render.com

Your Repo: https://github.com/RachEma-ux/MyNewAp1Claude
Deploy Branch: claude/rename-app-YVcio

================================================================================
QUICK REFERENCE
================================================================================

App URL: https://app-lktb.onrender.com
Dashboard: https://dashboard.render.com
Current Mode: DEV_MODE=true (OAuth bypassed)
Database: PostgreSQL (app-db)
Deploy Branch: claude/rename-app-YVcio
Auto-Deploy: Enabled ✓

Need Help? Check logs first, then retry deployment!

================================================================================
